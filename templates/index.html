<!DOCTYPE html>
<html>
<head>
  <title>Fraud Detection System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    input, button { padding: 10px; margin: 5px; }
    .result { margin-top: 20px; }
  </style>
</head>
<body>
  <h2>Digital Payment Fraud Detection</h2>
  <form id="fraudForm">
    <input type="number" name="amount" placeholder="Transaction Amount" required><br>
    <input type="number" name="time" placeholder="Transaction Hour (0-23)" required><br>
    <input type="number" name="location_id" placeholder="Location ID" required><br>
    <input type="number" name="device_id" placeholder="Device ID" required><br>
    <label><input type="checkbox" name="is_foreign"> Foreign Transaction</label><br>
    <label><input type="checkbox" name="is_high_risk_country"> High Risk Country</label><br>
    <button type="submit">Predict</button>
  </form>
  <div class="result" id="result"></div>

  <script>
    document.getElementById("fraudForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = {};
      formData.forEach((value, key) => {
        data[key] = (value === "on") ? 1 : parseFloat(value);
      });
      
      const response = await fetch("/predict", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(data)
      });
      const result = await response.json();
      document.getElementById("result").innerHTML = `
        <p><b>Prediction:</b> ${result.prediction === 1 ? "Fraudulent" : "Legitimate"}</p>
        <p><b>Explanation:</b> ${JSON.stringify(result.explanation)}</p>
      `;
    });
  </script>
</body>
</html>
